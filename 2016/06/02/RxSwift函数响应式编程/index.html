<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="iOS Swift Objective-C"><title>RxSwiftå‡½æ•°å“åº”å¼ç¼–ç¨‹ | Hale's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">RxSwiftå‡½æ•°å“åº”å¼ç¼–ç¨‹</h1><a id="logo" href="/.">Hale's Blog</a><p class="description">stay hungry stay foolish</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">RxSwiftå‡½æ•°å“åº”å¼ç¼–ç¨‹</h1><div class="post-meta">Jun 2, 2016<span> | </span><span class="category"><a href="/categories/iOS/">iOS</a></span></div><div class="post-content"><h2 id="Why-use-RxSwift"><a href="#Why-use-RxSwift" class="headerlink" title="Why use RxSwift?"></a>Why use RxSwift?</h2><p>æˆ‘ä»¬ä½¿ç”¨Swiftç¼–å†™iOSåº”ç”¨ç¨‹åºæ—¶ï¼Œæ€»æ˜¯éœ€è¦å¤„ç†å¤§é‡çš„å¤–éƒ¨å“åº”äº‹ä»¶ã€‚ä¾‹å¦‚ï¼šåˆ©ç”¨@IBActionæˆ–Target-actionå“åº”ç”¨æˆ·çš„æ“ä½œäº‹ä»¶ï¼›è®¾ç½®Notificationç›‘å¬é”®ç›˜çš„ä½ç½®å˜åŒ–ï¼›ä½¿ç”¨closureå¼‚æ­¥å¤„ç†ç½‘ç»œè¯·æ±‚è¿”å›çš„æ•°æ®ï¼›ä½¿ç”¨KVOç›‘å¬å±æ€§çš„å˜åŒ–ï¼Œä»¥åšå‡ºç›¸åº”æ“ä½œç­‰ã€‚å„ç§å„æ ·çš„äº‹ä»¶å“åº”æ–¹å¼ï¼Œæ— å½¢ä¸­å¢åŠ äº†ç¼–ç çš„å¤æ‚åº¦ã€‚æ˜¯å¦æœ‰ä¸€ç§ç¼–ç è§„èŒƒèƒ½å¤Ÿä½¿ç”¨ç»Ÿä¸€çš„æ¥å£å¤„ç†ä»¥ä¸Šçš„äº‹ä»¶å“åº”æ–¹å¼ã€‚ReactiveXå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªç³»ç»Ÿï¼Œå®ƒæ˜¯ä¸€ä¸ªå“åº”å¼ç¼–ç¨‹è§„èŒƒé›†åˆã€‚ç”±å®ƒå®šä¹‰çš„RxSwiftä¸ºæˆ‘ä»¬åœ¨å¼€å‘iOSåº”ç”¨ç¨‹åºæ—¶ï¼Œè§£å†³ä»¥ä¸Šé—®é¢˜æä¾›äº†ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="What-is-RxSwift"><a href="#What-is-RxSwift" class="headerlink" title="What is RxSwift?"></a>What is RxSwift?</h2><p>RxSwiftä¸­çš„Observable<element> æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ä¸­è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼Œç›¸å½“äºä¸€ä¸ªäº‹ä»¶åºåˆ— (GeneratorType) ï¼Œä¼šä¸»åŠ¨å‘è®¢é˜…è€…å‘é€æ–°äº§ç”Ÿçš„äº‹ä»¶ä¿¡æ¯ã€‚äº‹ä»¶ç±»å‹åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</element></p>
<ul>
<li>.Next(value) è¡¨ç¤ºæ–°çš„äº‹ä»¶æ•°æ®ã€‚</li>
<li>.Completed è¡¨ç¤ºäº‹ä»¶åºåˆ—çš„å®Œç»“</li>
<li>.Error åŒæ ·è¡¨ç¤ºå®Œç»“ï¼Œä½†æ˜¯ä»£è¡¨å¼‚å¸¸å¯¼è‡´çš„å®Œç»“ã€‚</li>
</ul>
<h2 id="How-RxSwift-work"><a href="#How-RxSwift-work" class="headerlink" title="How RxSwift work?"></a>How RxSwift work?</h2><h4 id="Observable-è¢«è§‚å¯Ÿè€…"><a href="#Observable-è¢«è§‚å¯Ÿè€…" class="headerlink" title="Observable(è¢«è§‚å¯Ÿè€…)"></a>Observable(è¢«è§‚å¯Ÿè€…)</h4><p>è¦å¾—åˆ°ä¸€ä¸ªObservableæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯RxSwiftå·²ç»æä¾›äº†çš„ï¼ˆè¿™é‡Œä½ å¯èƒ½éœ€è¦å¼•å…¥RxCocoaï¼‰ï¼Œä¸€ç§æ˜¯è‡ªå·±åˆ›å»ºã€‚æ¯”å¦‚ä½ æœ‰ä¸€ä¸ªUITextfieldï¼Œä½ è¦è®¢é˜…å…¶textçš„å˜åŒ–ï¼Œå°±å¯ä»¥é€šè¿‡textfield.rx_textæ¥è·å¾—è¿™ä¸ªObservable<string>çš„å¯¹è±¡ã€‚å¦‚æœè¦è‡ªå·±åˆ›å»ºçš„è¯ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæä¾›çš„createå‡½æ•°æ¥åˆ›å»ºï¼Œcreateæ¥å—å‡½æ•°é—­åŒ…ä½œä¸ºå‚æ•°ã€‚</string></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(1) let observable = textField.rx_text</div><div class="line"></div><div class="line">(2) let observable = &#123; (element: String) -&gt; Observable&lt;String&gt; in</div><div class="line">        return Observable.create &#123; observer in</div><div class="line">            observer.on(.Next(element))</div><div class="line">            observer.on(.Completed)</div><div class="line">            return NopDisposable.instance</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h4 id="Subscribeï¼ˆè®¢é˜…ï¼‰"><a href="#Subscribeï¼ˆè®¢é˜…ï¼‰" class="headerlink" title="Subscribeï¼ˆè®¢é˜…ï¼‰"></a>Subscribeï¼ˆè®¢é˜…ï¼‰</h4><p>å¦‚æœåªæœ‰ä¸€ä¸ªObservableè¢«åˆ›å»ºï¼Œè€Œæ²¡æœ‰è¢«ä»»ä½•è®¢é˜…è€…æ‰€è®¢é˜…ï¼Œé‚£ä¹ˆä»€ä¹ˆäº‹æƒ…ä¹Ÿä¸ä¼šå‘ç”Ÿï¼Œäº‹ä»¶è§¦å‘æ—¶ï¼Œè¢«è®¢é˜…è€…æ‰€å®šä¹‰çš„äº‹ä»¶å¤„ç†ä¹Ÿä¸ä¼šè¢«å¦‚æœŸæ‰§è¡Œï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…ï¼Œç”¨äºå“åº”äº‹ä»¶çš„è§¦å‘ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">let disposeBag = DisposeBag()</div><div class="line">    </div><div class="line">    let myJust = &#123; (element: String) -&gt; Observable&lt;String&gt; in</div><div class="line">        return Observable.create &#123; observer -&gt; Disposable in</div><div class="line">            observer.on(.Next(element))</div><div class="line">            observer.on(.Completed)</div><div class="line">            return NopDisposable.instance</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">        </div><div class="line">myJust(&quot;ğŸ¹&quot;)</div><div class="line">    .subscribe &#123; print($0) &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">--- create example ---</div><div class="line">Next(ğŸ¹)</div><div class="line">Completed</div></pre></td></tr></table></figure>
<h4 id="Subject"><a href="#Subject" class="headerlink" title="Subject"></a>Subject</h4><p>ç®€å•çš„æ¯”å–»ä¸‹ï¼ŒObservableåƒæ˜¯ä¸€ä¸ªæ°´ç®¡ï¼Œä¼šæºæºä¸æ–­çš„æœ‰æ°´å†’å‡ºæ¥ã€‚Subjectå°±åƒä¸€ä¸ªæ°´é¾™å¤´ï¼Œå®ƒå¯ä»¥å¥—åœ¨æ°´ç®¡ä¸Šï¼Œæ¥å—Observableä¸Šé¢çš„äº‹ä»¶ã€‚ä½†æ˜¯ä½œä¸ºæ°´é¾™å¤´ï¼Œå®ƒä¸‹é¢è¿˜å¯ä»¥è¢«åˆ«çš„observerç»™subscribeã€‚</p>
<p>åœ¨RxSwiftä¸­ï¼Œä¸»è¦æœ‰ä¸‰ç±»Subjectï¼š</p>
<ul>
<li>PublishSubject</li>
</ul>
<p>å®ƒä»…ä»…ä¼šå‘é€observerè®¢é˜…ä¹‹åçš„äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœsequenceä¸Šæœ‰.Next çš„åˆ°æ¥ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™æŸä¸ªobserverè¿˜æ²¡æœ‰subscribeå®ƒï¼Œè¿™ä¸ªobserverå°±æ”¶ä¸åˆ°è¿™æ¡ä¿¡æ¯ï¼Œå®ƒåªä¼šæ”¶åˆ°å®ƒè®¢é˜…ä¹‹åå‘ç”Ÿçš„äº‹ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">let disposeBag = DisposeBag()</div><div class="line">    let subject = PublishSubject&lt;String&gt;()</div><div class="line">    subject.onNext(&quot;ğŸ…°ï¸&quot;)</div><div class="line">    subject</div><div class="line">        .subscribeNext&#123; print(&quot;event:\($0)&quot;) &#125;</div><div class="line">        .addDisposableTo(disposeBag)</div><div class="line">    subject.onNext(&quot;ğŸ¶&quot;)</div><div class="line">    subject.onNext(â€œğŸ±&quot;)</div><div class="line">    </div><div class="line">--- PublishSubject example ---</div><div class="line">event:ğŸ¶</div><div class="line">event:ğŸ±</div></pre></td></tr></table></figure>
<ul>
<li>ReplaySubject</li>
</ul>
<p>å®ƒå’ŒPublishSubjectä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸ä¼šæ¼æ¶ˆæ¯ã€‚å³ä½¿observeråœ¨subscribeçš„æ—¶å€™å·²ç»æœ‰äº‹ä»¶å‘ç”Ÿè¿‡äº†ï¼Œå®ƒä¹Ÿä¼šæ”¶åˆ°ä¹‹å‰çš„äº‹ä»¶åºåˆ—ã€‚</p>
<ul>
<li>BehaviorSubject</li>
</ul>
<p>å½“æœ‰observeråœ¨è®¢é˜…ä¸€ä¸ªBehaviorSubjectçš„æ—¶å€™ï¼Œå®ƒé¦–å…ˆå°†ä¼šæ”¶åˆ°Observableä¸Šæœ€è¿‘å‘é€ä¸€ä¸ªä¿¡å·ï¼ˆæˆ–è€…æ˜¯é»˜è®¤å€¼ï¼‰ï¼Œæ¥ç€æ‰ä¼šæ”¶åˆ°Observableä¸Šä¼šå‘é€çš„åºåˆ—ã€‚</p>
<ul>
<li>Variable</li>
</ul>
<p>Variableæ˜¯BehaviorSubjectçš„å°è£…ï¼Œå®ƒå’ŒBehaviorSubjectä¸åŒä¹‹å¤„åœ¨äºï¼Œä¸èƒ½å‘Variableå‘é€.Completeå’Œ.Errorï¼Œå®ƒä¼šåœ¨ç”Ÿå‘½å‘¨æœŸç»“æŸè¢«é‡Šæ”¾çš„æ—¶å€™è‡ªåŠ¨å‘é€.Completeã€‚</p>
</div><div class="tags"><a href="/tags/RxSwift/">RxSwift</a></div><div class="post-nav"><a href="/2016/06/08/fastlane gymå®ç°ipaè‡ªåŠ¨æ‰“åŒ…è„šæœ¬/" class="pre">ä½¿ç”¨fastlane gymå®ç°ipaè‡ªåŠ¨æ‰“åŒ…è„šæœ¬</a><a href="/2016/06/02/Swiftä¸­çš„ç”Ÿæˆå™¨å’Œåºåˆ—/" class="next">Swiftä¸­çš„ç”Ÿæˆå™¨å’Œåºåˆ—</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://wuqiuhao.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/GeneratorType/" style="font-size: 15px;">GeneratorType</a> <a href="/tags/SequenceType/" style="font-size: 15px;">SequenceType</a> <a href="/tags/RxSwift/" style="font-size: 15px;">RxSwift</a> <a href="/tags/UILabel/" style="font-size: 15px;">UILabel</a> <a href="/tags/Database/" style="font-size: 15px;">Database</a> <a href="/tags/è‡ªåŠ¨æ‰“åŒ…/" style="font-size: 15px;">è‡ªåŠ¨æ‰“åŒ…</a> <a href="/tags/AVPlayerViewController/" style="font-size: 15px;">AVPlayerViewController</a> <a href="/tags/Custom-Transition/" style="font-size: 15px;">Custom Transition</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/WCDBç†è§£/">WCDBç†è§£</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/17/iOSè‡ªå®šä¹‰æ¨¡æ€è§†å›¾è½¬åœº/">iOSè‡ªå®šä¹‰æ¨¡æ€è§†å›¾è½¬åœº</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/08/fastlane gymå®ç°ipaè‡ªåŠ¨æ‰“åŒ…è„šæœ¬/">ä½¿ç”¨fastlane gymå®ç°ipaè‡ªåŠ¨æ‰“åŒ…è„šæœ¬</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/02/RxSwiftå‡½æ•°å“åº”å¼ç¼–ç¨‹/">RxSwiftå‡½æ•°å“åº”å¼ç¼–ç¨‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/02/Swiftä¸­çš„ç”Ÿæˆå™¨å’Œåºåˆ—/">Swiftä¸­çš„ç”Ÿæˆå™¨å’Œåºåˆ—</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/05/iOSè§†é¢‘ã€éŸ³é¢‘æ’­æ”¾/">iOSè§†é¢‘ã€éŸ³é¢‘æ’­æ”¾</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/30/UILabelå‚ç›´æ–¹å‘å¸ƒå±€è°ƒæ•´â€”â€”å®ç°å±…ä¸Šå±…ä¸‹æ•ˆæœ/">UILabelå‚ç›´æ–¹å‘å¸ƒå±€è°ƒæ•´â€”â€”å®ç°å±…ä¸Šå±…ä¸‹æ•ˆæœ</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2017 <a href="/." rel="nofollow">Hale's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>